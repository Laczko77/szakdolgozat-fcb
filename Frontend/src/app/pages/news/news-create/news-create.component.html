<div class="news-admin-container">

  <div class="news-form-container">
    <h3 *ngIf="selectedNews; else newForm">Hír szerkesztése</h3>
    <ng-template #newForm><h3>Új hír létrehozása</h3></ng-template>

    <form [formGroup]="newsForm" (ngSubmit)="submit()" id="newsForm">
      <label for="title">Cím</label>
      <input id="title" type="text" formControlName="title" />

      <label for="content">Tartalom</label>
      <textarea id="content" formControlName="content" rows="5"></textarea>

      <label for="imageUrl">Kép</label>
      <input type="file" (change)="onFileSelected($event)" accept="image/*" />

      <button type="submit" [disabled]="isSubmitting">
        {{ selectedNews ? 'Frissítés' : 'Létrehozás' }}
      </button>

      <button type="button" class="cancel" *ngIf="selectedNews" (click)="clearForm()">
        Mégse
      </button>
    </form>
  </div>

  <h2>Hírek kezelése</h2>

  <input
    type="text"
    [(ngModel)]="searchTerm"
    placeholder="Keresés cím alapján..."
    class="search-bar"
  />

  <div class="news-grid">
    <div *ngFor="let news of filteredNews()" class="news-card">
      <img [src]="news.imageUrl" alt="Hír képe" />
      <div class="news-content">
        <h4>{{ news.title }}</h4>
        <div class="news-actions">
          <button (click)="edit(news)">Szerkesztés</button>
          <button (click)="deleteNews(news._id!)">Törlés</button>
        </div>
      </div>
    </div>
  </div>
</div>
