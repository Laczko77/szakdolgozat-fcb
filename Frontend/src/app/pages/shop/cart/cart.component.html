<div *ngIf="orderPlaced; else cartView" class="order-success">
  <h2>Sikeres rendel√©s! üéâ</h2>
  <p>K√∂sz√∂nj√ºk a rendel√©sed. A r√©szleteket megtal√°lod a rendel√©seid k√∂z√∂tt.</p>
  <button routerLink="/orders" class="order-btn">Rendel√©seim megtekint√©se</button>
</div>

<ng-template #cartView>
  <div class="cart-container" *ngIf="cart">
    <h2>Kosarad</h2>

    <div *ngIf="cart.items.length === 0" class="empty">
      A kosarad √ºres üòï
      <button routerLink="/orders" class="order-btn">Rendel√©seim megtekint√©se</button>
    </div>

    <div *ngIf="cart.items.length > 0" class="items">
      <div class="item" *ngFor="let item of cart.items">
        <img [src]="item.productId.imageUrl" alt="{{ item.productId.name }}" />
        <div class="details">
          <h3>{{ item.productId.name }}</h3>
          <p>Kateg√≥ria: {{ item.productId.category }}</p>
          <p>√År: {{ item.productId.price | currency:'EUR' }}</p>
          <p>Mennyis√©g: {{ item.quantity }}</p>

          <p *ngIf="item.size">M√©ret: {{ item.size }}</p>

          <!-- J√°t√©kosn√©v helyes ki√≠rat√°sa -->
          <p *ngIf="item.player">J√°t√©kos: {{ item.player['name'] }}</p>
        </div>
        <div class="actions">
          <button (click)="decreaseItem(item)">‚Äì</button>
          <button (click)="removeItem(item.productId._id)">‚ùå</button>
        </div>
      </div>

      <div class="bottom">
        <button class="clear" (click)="clearCart()">Kos√°r √ºr√≠t√©se</button>
        <button class="order" (click)="openShippingModal()">Sz√°ll√≠t√°si adatok megad√°sa</button>
      </div>

      <!-- MODAL h√°tt√©r -->
<div class="modal-overlay" *ngIf="isShippingModalOpen">
  <div class="modal-content">
    <h3>Sz√°ll√≠t√°si adatok</h3>

    <form [formGroup]="shippingForm" class="shipping-form">
      <input formControlName="fullName" placeholder="Teljes n√©v" />
      <input formControlName="phone" placeholder="Telefonsz√°m" />
      <input formControlName="zip" placeholder="Ir√°ny√≠t√≥sz√°m" />
      <input formControlName="city" placeholder="V√°ros" />
      <input formControlName="street" placeholder="Utca, h√°zsz√°m" />
      <input formControlName="floor" placeholder="Emelet/ajt√≥ (opcion√°lis)" />
    </form>

    <div class="modal-buttons">
      <button (click)="closeShippingModal()" class="cancel">M√©gse</button>
      <button 
        [disabled]="shippingForm.invalid" 
        (click)="submitShippingAndOrder()" 
        class="confirm">Rendel√©s lead√°sa</button>
    </div>
  </div>
</div>

    </div>
  </div>
</ng-template>
